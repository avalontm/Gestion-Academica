@page "/calendario/{dateString}"
@using System.Diagnostics;
@inject AuthenticationStateProvider GetAuthenticationStateAsync
@inject NavigationManager NavigationManager


<div class="container">

    <div class="container-spacing">
        <h2>Tareas del <b>@date.ToString("dddd dd \\de\\ MMMM \\del\\ yyyy")</b></h2>
    </div>

</div>

@code {
    [ParameterAttribute]
    public string? dateString { set; get; }
    DateTime date { set; get; }
    [Inject] IToastService? toastService { set; get; }
    AuthModel auth { set; get; } = new();
    List<Tarea> tareas { set; get; }
    DialogDefault? dialog;
    DialogModel? dialogModel;

    protected async override Task OnInitializedAsync()
    {
        auth = await this.GetAuth(GetAuthenticationStateAsync);

        if (!auth.status)
        {
            NavigationManager.NavigateTo("/account", true);
            return;
        }

        onLoadTareas();
        StateHasChanged();
    }

    void onLoadTareas()
    {
        try
        {
            date = DateTime.Parse(dateString);
        }catch
        {
            date = DateTime.Now;
        }


    }
}
